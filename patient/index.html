<!DOCTYPE html>
<html lang="uz">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Boshqaruv Paneli - MedMapp.uz</title>
  <meta content="Bemor uchun shaxsiy kabinet va boshqaruv paneli" name="description">
  <meta content="medmap, patient, dashboard, profile, appointments, services" name="keywords">

  <!-- Favicons -->
  <link href="https://placehold.co/32x32/4154f1/ffffff?text=M" rel="icon">
  <link href="https://placehold.co/180x180/4154f1/ffffff?text=M" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

  <!-- 1. Umumiy stillar (saytning hamma sahifasi uchun) -->
  <link rel="stylesheet" href="style.css">
  <!-- 2. Shu sahifaga xos bo'lgan maxsus stillar -->
  <link rel="stylesheet" href="index.css">

</head>

<body>

<div class="wrapper">
  <!-- ======= Sidebar ======= -->
  <aside id="sidebar" class="sidebar">
    <a href="#" class="logo d-flex align-items-center text-decoration-none">
        <img src="../images/MedMapp_Logo_shaffof.png" height="66" alt="Logo">
    </a>
    <ul class="sidebar-nav nav flex-column mt-4">
        <li class="nav-item">
          <a class="nav-link active" href="index.html"><i class="bi bi-grid-1x2-fill"></i><span data-lang-key="dashboard">Boshqaruv paneli</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="patient_profile.html"><i class="bi bi-person-fill"></i><span data-lang-key="my_profile">Mening profilim</span></a>
        </li>
         <li class="nav-item">
          <a class="nav-link" href="patient_queue.html"><i class="bi bi-calendar-check-fill"></i><span data-lang-key="my_appointments">Mening yozuvlarim</span></a>
        </li>
         <li class="nav-item">
          <a class="nav-link" href="analysis.html"><i class="bi bi-file-earmark-medical-fill"></i><span data-lang-key="lab_results">Tahlil natijalari</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="patient_consultation.html"><i class="bi bi-chat-dots-fill"></i><span data-lang-key="consultations">Konsultatsiyalar</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="payments.html"><i class="bi bi-credit-card-fill"></i><span data-lang-key="payments">To'lovlar</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reviews.html"><i class="bi bi-star-fill"></i><span data-lang-key="my_reviews">Izohlarim</span></a>
        </li>
      </ul>
  </aside><!-- End Sidebar-->
  
  <div class="sidebar-backdrop" id="sidebarBackdrop"></div>

  <main class="main-content">
    <!-- Main Header -->
    <header class="main-header">
        <div class="header-left d-flex align-items-center">
            <button class="btn px-1 me-2" id="sidebarToggleBtn" type="button"><i class="bi bi-list fs-3"></i></button>
            <div class="pagetitle d-none d-md-block">
                <h1 data-lang-key="dashboard_title">Boshqaruv Paneli</h1>
            </div>
        </div>
        <div class="header-right d-flex align-items-center">
             <!-- Language Dropdown -->
            <div class="dropdown lang-dropdown me-2">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="bi bi-translate fs-5"></i>
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item d-flex align-items-center" href="#" data-lang="uz"><i class="bi bi-flag-fill me-2"></i> O'zbekcha</a></li>
                <li><a class="dropdown-item d-flex align-items-center" href="#" data-lang="ru"><i class="bi bi-flag-fill me-2"></i> Русский</a></li>
                <li><a class="dropdown-item d-flex align-items-center" href="#" data-lang="en"><i class="bi bi-flag-fill me-2"></i> English</a></li>
              </ul>
            </div>

            <button class="btn nav-link me-2" id="darkModeToggle"><i class="bi bi-moon-stars-fill fs-5"></i></button>
            <a href="#" class="nav-link me-3"><i class="bi bi-bell fs-5"></i></a>
            <!-- Profile Dropdown -->
            <div class="dropdown profile-dropdown">
                <a href="#" class="d-flex align-items-center text-decoration-none" data-bs-toggle="dropdown">
                    <img src="https://placehold.co/40x40/EFEFEF/333333?text=A" alt="Profile" class="rounded-circle" id="profileImage">
                    <div class="ms-2 d-none d-md-block">
                        <div class="fw-bold" id="profileName">Ali Valiyev</div>
                        <small class="text-muted" data-lang-key="patient">Bemor</small>
                    </div>
                </a>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item d-flex align-items-center" href="#" data-lang-key="settings"><i class="bi bi-gear-fill me-2 text-secondary"></i>Sozlamalar</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item d-flex align-items-center text-danger" href="#" data-lang-key="logout"><i class="bi bi-box-arrow-right me-2"></i>Chiqish</a></li>
                </ul>
            </div>
        </div>
    </header>

    <div class="page-body">
        <div class="pagetitle mb-4">
            <h1 data-lang-key="dashboard_title">Boshqaruv Paneli</h1>
            <p class="text-muted mb-0" data-lang-key="greeting">Assalomu alaykum, Ali Valiyev!</p>
        </div>

        <div class="row">
            <div class="col-lg-8">
                <!-- Upcoming Appointment -->
                <div class="info-card appointment-card">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <h5 class="card-title text-white" data-lang-key="next_appointment">Keyingi uchrashuv</h5>
                                <div class="d-flex align-items-center mt-3">
                                    <img src="https://placehold.co/100x100/eef2ff/4154f1?text=SN" class="rounded-circle doctor-avatar" alt="Shifokor">
                                    <div class="ms-3">
                                        <h6 class="mb-1 text-white">Dr. Salima Nosirova</h6>
                                        <p class="mb-0 small opacity-75">Kardiolog, Akfa Medline</p>
                                    </div>
                                </div>
                                <div class="mt-4 d-flex">
                                    <div class="me-4"><i class="bi bi-calendar-event me-2"></i> <strong data-lang-key="today">Bugun</strong></div>
                                    <div><i class="bi bi-clock me-2"></i> <strong>14:30</strong></div>
                                </div>
                            </div>
                            <div class="col-md-4 text-md-end mt-3 mt-md-0">
                                <a href="#" class="btn btn-light" data-lang-key="join_consultation">Konsultatsiyaga o'tish</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <!-- Recent Activity -->
                <div class="info-card">
                    <div class="card-body">
                        <h5 class="card-title mb-3" data-lang-key="recent_activity">So'nggi Faollik</h5>
                        <div class="activity-feed">
                            <div class="activity-item">
                                <div class="activity-icon bg-success bg-opacity-10 text-success"><i class="bi bi-check-circle-fill"></i></div>
                                <div>
                                    <strong data-lang-key="payment_success">To'lov muvaffaqiyatli</strong>
                                    <p class="small text-muted mb-0" data-lang-key="payment_details">Konsultatsiya uchun to'lov qabul qilindi. <br> 2 soat oldin</p>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon bg-primary bg-opacity-10 text-primary"><i class="bi bi-chat-dots-fill"></i></div>
                                <div>
                                    <strong data-lang-key="new_message">Yangi xabar</strong>
                                    <p class="small text-muted mb-0" data-lang-key="message_details">Dr. Salima Nosirova sizga fayl yubordi. <br> Kecha, 18:45</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Extra Services -->
        <h5 class="mb-3" style="font-size: 1.1rem; font-weight: 600;" data-lang-key="extra_services_title">Qo'shimcha Xizmatlar</h5>
        <div class="row row-cols-1 row-cols-md-3 row-cols-lg-5 g-3">
            <div class="col">
                <div class="info-card service-card h-100">
                    <div class="icon-wrapper"><i class="bi bi-patch-check-fill"></i></div>
                    <h4 data-lang-key="service_visa_title">Taklifnoma & Viza</h4>
                    <p class="text-muted small" data-lang-key="service_visa_desc">Klinikadan taklifnoma oling va viza masalalarida yordam so'rang.</p>
                    <button class="btn btn-primary btn-sm mt-auto" data-bs-toggle="modal" data-bs-target="#visaModal" data-lang-key="order_now">Buyurtma qilish</button>
                </div>
            </div>
            <div class="col">
                <div class="info-card service-card h-100">
                    <div class="icon-wrapper"><i class="bi bi-airplane"></i></div>
                    <h4 data-lang-key="service_transfer_title">Transfer Xizmati</h4>
                    <p class="text-muted small" data-lang-key="service_transfer_desc">Aeroportdan kutib olish va klinikaga qulay yetib borishni ta'minlang.</p>
                    <button class="btn btn-primary btn-sm mt-auto" data-bs-toggle="modal" data-bs-target="#transferModal" data-lang-key="order_now">Buyurtma qilish</button>
                </div>
            </div>
             <div class="col">
                <div class="info-card service-card h-100">
                    <div class="icon-wrapper"><i class="bi bi-building-check"></i></div>
                    <h4 data-lang-key="service_hotel_title">Mehmonxona</h4>
                    <p class="text-muted small" data-lang-key="service_hotel_desc">Klinikaga yaqin va qulay mehmonxonalardan joy band qiling.</p>
                    <button class="btn btn-primary btn-sm mt-auto" data-bs-toggle="modal" data-bs-target="#hotelModal" data-lang-key="order_now">Buyurtma qilish</button>
                </div>
            </div>
            <div class="col">
                <div class="info-card service-card h-100">
                    <div class="icon-wrapper"><i class="bi bi-translate"></i></div>
                    <h4 data-lang-key="service_translator_title">Tarjimon Xizmati</h4>
                    <p class="text-muted small" data-lang-key="service_translator_desc">Davolanish jarayonida til bilan bog'liq muammolarga duch kelmang.</p>
                    <button class="btn btn-primary btn-sm mt-auto" data-bs-toggle="modal" data-bs-target="#translatorModal" data-lang-key="order_now">Buyurtma qilish</button>
                </div>
            </div>
            <div class="col">
                <div class="info-card service-card h-100">
                    <div class="icon-wrapper"><i class="bi bi-sim"></i></div>
                    <h4 data-lang-key="service_sim_title">SIM-karta</h4>
                    <p class="text-muted small" data-lang-key="service_sim_desc">Borgan davlatingizda yaqinlaringiz bilan aloqada bo'ling.</p>
                    <button class="btn btn-primary btn-sm mt-auto" data-bs-toggle="modal" data-bs-target="#simModal" data-lang-key="order_now">Buyurtma qilish</button>
                </div>
            </div>
        </div>
    </div>
</main>
</div>

<!-- Modals -->
<div class="modal fade" id="visaModal" tabindex="-1" aria-labelledby="visaModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="visaModalLabel" data-lang-key="modal_visa_title">Taklifnoma & Viza uchun so'rov</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p class="text-muted small" data-lang-key="modal_visa_desc">Iltimos, pasportingizning skaner qilingan nusxasini yuklang va taxminiy kelish sanasini kiriting.</p>
        <form>
          <div class="mb-3">
            <label for="passportFile" class="form-label" data-lang-key="modal_visa_passport">Pasport nusxasi (PDF, JPG)</label>
            <input class="form-control" type="file" id="passportFile">
          </div>
          <div class="mb-3">
            <label for="arrivalDate" class="form-label" data-lang-key="modal_visa_arrival">Taxminiy kelish sanasi</label>
            <input type="date" class="form-control" id="arrivalDate">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-light border" data-bs-dismiss="modal" data-lang-key="close">Yopish</button>
        <button type="button" class="btn btn-primary" data-lang-key="send_request">So'rov yuborish</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="transferModal" tabindex="-1" aria-labelledby="transferModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="transferModalLabel" data-lang-key="modal_transfer_title">Transfer xizmatiga buyurtma</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label for="flightNumber" class="form-label" data-lang-key="modal_transfer_flight">Parvoz raqami</label>
            <input type="text" class="form-control" id="flightNumber" placeholder="HY-271">
          </div>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="transferDate" class="form-label" data-lang-key="modal_transfer_date">Uchib kelish sanasi</label>
              <input type="date" class="form-control" id="transferDate">
            </div>
            <div class="col-md-6 mb-3">
              <label for="transferTime" class="form-label" data-lang-key="modal_transfer_time">Vaqti</label>
              <input type="time" class="form-control" id="transferTime">
            </div>
          </div>
          <div class="mb-3">
             <label for="passengers" class="form-label" data-lang-key="modal_transfer_passengers">Yo'lovchilar soni</label>
             <input type="number" class="form-control" id="passengers" value="1">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-light border" data-bs-dismiss="modal" data-lang-key="close">Yopish</button>
        <button type="button" class="btn btn-primary" data-lang-key="order_now">Buyurtma qilish</button>
      </div>
    </div>
  </div>
</div>
<!-- Hotel Modal -->
<div class="modal fade" id="hotelModal" tabindex="-1" aria-labelledby="hotelModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="hotelModalLabel" data-lang-key="modal_hotel_title">Mehmonxona bron qilish</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label for="checkinDate" class="form-label" data-lang-key="modal_hotel_checkin">Kelish sanasi</label>
              <input type="date" class="form-control" id="checkinDate">
            </div>
            <div class="col-md-6 mb-3">
              <label for="checkoutDate" class="form-label" data-lang-key="modal_hotel_checkout">Ketish sanasi</label>
              <input type="date" class="form-control" id="checkoutDate">
            </div>
          </div>
          <div class="mb-3">
             <label for="guests" class="form-label" data-lang-key="modal_hotel_guests">Mehmonlar soni</label>
             <input type="number" class="form-control" id="guests" value="1">
          </div>
           <div class="mb-3">
                <label for="hotelClass" class="form-label" data-lang-key="modal_hotel_class">Mehmonxona klassi</label>
                <select id="hotelClass" class="form-select">
                    <option selected data-lang-key="choose">Tanlang...</option>
                    <option>Ekonom</option>
                    <option>Standart</option>
                    <option>Lyuks</option>
                </select>
            </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-light border" data-bs-dismiss="modal" data-lang-key="close">Yopish</button>
        <button type="button" class="btn btn-primary" data-lang-key="order_now">Buyurtma qilish</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="translatorModal" tabindex="-1" aria-labelledby="translatorModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="translatorModalLabel" data-lang-key="modal_translator_title">Tarjimon xizmatiga buyurtma</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
         <form>
            <div class="mb-3">
                <label for="language" class="form-label" data-lang-key="modal_translator_lang">Kerakli til</label>
                <select id="language" class="form-select">
                    <option selected data-lang-key="choose">Tanlang...</option>
                    <option>Ingliz tili</option>
                    <option>Rus tili</option>
                    <option>Turk tili</option>
                    <option>Hind tili</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="serviceDays" class="form-label" data-lang-key="modal_translator_days">Xizmat kerak bo'ladigan kunlar soni</label>
                <input type="number" class="form-control" id="serviceDays" value="3">
            </div>
         </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-light border" data-bs-dismiss="modal" data-lang-key="close">Yopish</button>
        <button type="button" class="btn btn-primary" data-lang-key="order_now">Buyurtma qilish</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="simModal" tabindex="-1" aria-labelledby="simModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="simModalLabel" data-lang-key="modal_sim_title">SIM-kartaga buyurtma</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p data-lang-key="modal_sim_desc">Mahalliy SIM-kartaga buyurtma berishni tasdiqlaysizmi? Bizning operator siz bilan bog'lanib, tariflar haqida ma'lumot beradi.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-light border" data-bs-dismiss="modal" data-lang-key="no">Yo'q</button>
        <button type="button" class="btn btn-primary" data-lang-key="yes_confirm">Ha, tasdiqlayman</button>
      </div>
    </div>
  </div>
</div>

  <!-- Vendor JS Files -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
      document.addEventListener('DOMContentLoaded', () => {
          // --- Translations ---
          const translations = {
              'uz': {
                  dashboard: "Boshqaruv paneli", my_profile: "Mening profilim", my_appointments: "Mening yozuvlarim", lab_results: "Tahlil natijalari", consultations: "Konsultatsiyalar", extra_services: "Qo'shimcha xizmatlar", payments: "To'lovlar",
                  dashboard_title: "Boshqaruv Paneli", patient: "Bemor", settings: "Sozlamalar", logout: "Chiqish",
                  greeting: "Assalomu alaykum, Ali Valiyev!", next_appointment: "Keyingi uchrashuv", today: "Bugun", join_consultation: "Konsultatsiyaga o'tish",
                  recent_activity: "So'nggi Faollik", payment_success: "To'lov muvaffaqiyatli", payment_details: "Konsultatsiya uchun to'lov qabul qilindi. <br> 2 soat oldin",
                  new_message: "Yangi xabar", message_details: "Dr. Salima Nosirova sizga fayl yubordi. <br> Kecha, 18:45",
                  extra_services_title: "Qo'shimcha Xizmatlar",
                  service_visa_title: "Taklifnoma & Viza", service_visa_desc: "Klinikadan taklifnoma oling va viza masalalarida yordam so'rang.",
                  service_transfer_title: "Transfer Xizmati", service_transfer_desc: "Aeroportdan kutib olish va klinikaga qulay yetib borishni ta'minlang.",
                  service_hotel_title: "Mehmonxona", service_hotel_desc: "Klinikaga yaqin va qulay mehmonxonalardan joy band qiling.",
                  service_translator_title: "Tarjimon Xizmati", service_translator_desc: "Davolanish jarayonida til bilan bog'liq muammolarga duch kelmang.",
                  service_sim_title: "SIM-karta", service_sim_desc: "Borgan davlatingizda yaqinlaringiz bilan aloqada bo'ling.",
                  order_now: "Buyurtma qilish",
                  modal_visa_title: "Taklifnoma & Viza uchun so'rov", modal_visa_desc: "Iltimos, pasportingizning skaner qilingan nusxasini yuklang va taxminiy kelish sanasini kiriting.",
                  modal_visa_passport: "Pasport nusxasi (PDF, JPG)", modal_visa_arrival: "Taxminiy kelish sanasi",
                  close: "Yopish", send_request: "So'rov yuborish",
                  modal_transfer_title: "Transfer xizmatiga buyurtma", modal_transfer_flight: "Parvoz raqami", modal_transfer_date: "Uchib kelish sanasi", modal_transfer_time: "Vaqti", modal_transfer_passengers: "Yo'lovchilar soni",
                  modal_hotel_title: "Mehmonxona bron qilish", modal_hotel_checkin: "Kelish sanasi", modal_hotel_checkout: "Ketish sanasi", modal_hotel_guests: "Mehmonlar soni", modal_hotel_class: "Mehmonxona klassi",
                  modal_translator_title: "Tarjimon xizmatiga buyurtma", modal_translator_lang: "Kerakli til", choose: "Tanlang...", modal_translator_days: "Xizmat kerak bo'ladigan kunlar soni",
                  modal_sim_title: "SIM-kartaga buyurtma", modal_sim_desc: "Mahalliy SIM-kartaga buyurtma berishni tasdiqlaysizmi? Bizning operator siz bilan bog'lanib, tariflar haqida ma'lumot beradi.",
                  no: "Yo'q", yes_confirm: "Ha, tasdiqlayman"
              },
              'ru': {
                  dashboard: "Панель управления", my_profile: "Мой профиль", my_appointments: "Мои записи", lab_results: "Результаты анализов", consultations: "Консультации", extra_services: "Доп. услуги", payments: "Платежи",
                  dashboard_title: "Панель Управления", patient: "Пациент", settings: "Настройки", logout: "Выйти",
                  greeting: "Здравствуйте, Али Валиев!", next_appointment: "Следующая встреча", today: "Сегодня", join_consultation: "Перейти к консультации",
                  recent_activity: "Последняя активность", payment_success: "Оплата прошла успешно", payment_details: "Оплата за консультацию получена. <br> 2 часа назад",
                  new_message: "Новое сообщение", message_details: "Др. Салима Носирова отправила вам файл. <br> Вчера, 18:45",
                  extra_services_title: "Дополнительные Услуги",
                  service_visa_title: "Приглашение и Виза", service_visa_desc: "Получите приглашение от клиники и помощь в визовых вопросах.",
                  service_transfer_title: "Услуга Трансфера", service_transfer_desc: "Обеспечьте встречу в аэропорту и комфортный проезд до клиники.",
                  service_hotel_title: "Гостиница", service_hotel_desc: "Забронируйте номер в удобных отелях рядом с клиникой.",
                  service_translator_title: "Услуга Переводчика", service_translator_desc: "Не сталкивайтесь с языковыми барьерами во время лечения.",
                  service_sim_title: "SIM-карта", service_sim_desc: "Оставайтесь на связи с близкими в стране пребывания.",
                  order_now: "Заказать",
                  modal_visa_title: "Запрос на приглашение и визу", modal_visa_desc: "Пожалуйста, загрузите скан вашего паспорта и укажите предполагаемую дату прибытия.",
                  modal_visa_passport: "Копия паспорта (PDF, JPG)", modal_visa_arrival: "Предполагаемая дата прибытия",
                  close: "Закрыть", send_request: "Отправить запрос",
                  modal_transfer_title: "Заказ услуги трансфера", modal_transfer_flight: "Номер рейса", modal_transfer_date: "Дата прибытия", modal_transfer_time: "Время", modal_transfer_passengers: "Количество пассажиров",
                  modal_hotel_title: "Бронирование гостиницы", modal_hotel_checkin: "Дата заезда", modal_hotel_checkout: "Дата выезда", modal_hotel_guests: "Количество гостей", modal_hotel_class: "Класс гостиницы",
                  modal_translator_title: "Заказ услуги переводчика", modal_translator_lang: "Нужный язык", choose: "Выберите...", modal_translator_days: "Количество дней услуги",
                  modal_sim_title: "Заказ SIM-карты", modal_sim_desc: "Подтверждаете заказ местной SIM-карты? Наш оператор свяжется с вами для информации о тарифах.",
                  no: "Нет", yes_confirm: "Да, подтверждаю"
              },
              'en': {
                  dashboard: "Dashboard", my_profile: "My Profile", my_appointments: "My Appointments", lab_results: "Lab Results", consultations: "Consultations", extra_services: "Extra Services", payments: "Payments",
                  dashboard_title: "Dashboard", patient: "Patient", settings: "Settings", logout: "Logout",
                  greeting: "Welcome, Ali Valiyev!", next_appointment: "Next Appointment", today: "Today", join_consultation: "Join Consultation",
                  recent_activity: "Recent Activity", payment_success: "Payment Successful", payment_details: "Payment for consultation received. <br> 2 hours ago",
                  new_message: "New Message", message_details: "Dr. Salima Nosirova sent you a file. <br> Yesterday, 18:45",
                  extra_services_title: "Extra Services",
                  service_visa_title: "Invitation & Visa", service_visa_desc: "Get an invitation from the clinic and assistance with visa issues.",
                  service_transfer_title: "Transfer Service", service_transfer_desc: "Arrange for airport pickup and a comfortable ride to the clinic.",
                  service_hotel_title: "Hotel Booking", service_hotel_desc: "Book a room in comfortable hotels near the clinic.",
                  service_translator_title: "Translator Service", service_translator_desc: "Don't face language barriers during your treatment.",
                  service_sim_title: "SIM Card", service_sim_desc: "Stay in touch with your loved ones in the host country.",
                  order_now: "Order Now",
                  modal_visa_title: "Request for Invitation & Visa", modal_visa_desc: "Please upload a scan of your passport and enter the estimated date of arrival.",
                  modal_visa_passport: "Passport copy (PDF, JPG)", modal_visa_arrival: "Estimated arrival date",
                  close: "Close", send_request: "Send Request",
                  modal_transfer_title: "Order Transfer Service", modal_transfer_flight: "Flight number", modal_transfer_date: "Arrival date", modal_transfer_time: "Time", modal_transfer_passengers: "Number of passengers",
                  modal_hotel_title: "Hotel Booking", modal_hotel_checkin: "Check-in date", modal_hotel_checkout: "Check-out date", modal_hotel_guests: "Number of guests", modal_hotel_class: "Hotel class",
                  modal_translator_title: "Order Translator Service", modal_translator_lang: "Required language", choose: "Choose...", modal_translator_days: "Number of service days",
                  modal_sim_title: "Order SIM Card", modal_sim_desc: "Do you confirm the order for a local SIM card? Our operator will contact you with tariff information.",
                  no: "No", yes_confirm: "Yes, I confirm"
              }
          };

          const setLanguage = (lang) => {
              document.documentElement.lang = lang;
              localStorage.setItem('language', lang);
              document.querySelectorAll('[data-lang-key]').forEach(element => {
                  const key = element.getAttribute('data-lang-key');
                  const icon = element.querySelector('i');
                  if (translations[lang] && translations[lang][key]) {
                      const translationText = translations[lang][key];
                      if (icon) {
                          // Preserve the icon and update only the text content
                          let currentText = element.childNodes[element.childNodes.length - 1];
                          if(currentText.nodeType === Node.TEXT_NODE) {
                              currentText.textContent = " " + translationText;
                          } else {
                               element.insertAdjacentText('beforeend', " " + translationText);
                          }
                      } else {
                          element.innerHTML = translationText;
                      }
                  }
              });
          };

          // --- UI Elements ---
          const sidebarToggleBtn = document.getElementById('sidebarToggleBtn');
          const sidebarBackdrop = document.getElementById('sidebarBackdrop');
          const darkModeToggle = document.getElementById('darkModeToggle');
          const langLinks = document.querySelectorAll('.lang-dropdown .dropdown-item');

          // --- Sidebar Logic ---
          const toggleSidebar = () => {
              const isDesktop = window.innerWidth >= 992;
              if (isDesktop) {
                  document.body.classList.toggle('sidebar-collapsed');
              } else {
                  document.body.classList.toggle('sidebar-open');
              }
          };

          if (sidebarToggleBtn) {
              sidebarToggleBtn.addEventListener('click', toggleSidebar);
          }
          if (sidebarBackdrop) {
              sidebarBackdrop.addEventListener('click', toggleSidebar);
          }
          
          // --- Dark Mode & Language Logic ---
          if (darkModeToggle) {
              darkModeToggle.addEventListener('click', () => {
                  document.body.classList.toggle('dark-mode');
                  const icon = darkModeToggle.querySelector('i');
                  icon.classList.toggle('bi-moon-stars-fill');
                  icon.classList.toggle('bi-sun-fill');
              });
          }
          langLinks.forEach(link => {
              link.addEventListener('click', (e) => {
                  e.preventDefault();
                  const selectedLang = e.currentTarget.getAttribute('data-lang');
                  setLanguage(selectedLang);
              });
          });
          
          // --- Initial Load ---
          const savedLang = localStorage.getItem('language') || 'uz';
          setLanguage(savedLang);
          
          document.getElementById('profileName').textContent = "Ali Valiyev";
          document.getElementById('profileImage').src = `https://placehold.co/40x40/EFEFEF/333333?text=A`;
          
          if (window.innerWidth < 992) {
              document.body.classList.add('sidebar-collapsed');
          }
      });
  </script>
</body>
</html>
