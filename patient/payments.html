<!DOCTYPE html>
<html lang="uz">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>To'lovlar Sahifasi - MedMapp.uz</title>
  <meta content="Bemorlar uchun xizmatlarga to'lov qilish sahifasi" name="description">
  <meta content="medmap, patient, payment, pay, click, payme, uzcard, humo" name="keywords">

  <!-- Favicons -->
  <link href="https://placehold.co/32x32/4154f1/ffffff?text=M" rel="icon">
  <link href="https://placehold.co/180x180/4154f1/ffffff?text=M" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@500&display=swap" rel="stylesheet">


  <!-- Vendor CSS Files -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

  <!-- 1. Umumiy stillar (saytning hamma sahifasi uchun) -->
  <link rel="stylesheet" href="style.css">
  <!-- 2. Shu sahifaga xos bo'lgan maxsus stillar -->
  <link rel="stylesheet" href="payments.css">

</head>

<body>

<div class="wrapper">
  <!-- ======= Sidebar ======= -->
  <aside id="sidebar" class="sidebar">
    <a href="#" class="logo d-flex align-items-center text-decoration-none">
        <img src="../images/MedMapp_Logo_shaffof.png" height="66" alt="Logo">
    </a>
    <ul class="sidebar-nav nav flex-column mt-4">
        <li class="nav-item">
          <a class="nav-link" href="index.html"><i class="bi bi-grid-1x2-fill"></i><span data-lang-key="dashboard">Boshqaruv paneli</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="patient_profile.html"><i class="bi bi-person-fill"></i><span data-lang-key="my_profile">Mening profilim</span></a>
        </li>
         <li class="nav-item">
          <a class="nav-link" href="patient_queue.html"><i class="bi bi-calendar-check-fill"></i><span data-lang-key="my_appointments">Mening yozuvlarim</span></a>
        </li>
         <li class="nav-item">
          <a class="nav-link" href="analysis.html"><i class="bi bi-file-earmark-medical-fill"></i><span data-lang-key="lab_results">Tahlil natijalari</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="patient_consultation.html"><i class="bi bi-chat-dots-fill"></i><span data-lang-key="consultations">Konsultatsiyalar</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="payments.html"><i class="bi bi-credit-card-fill"></i><span data-lang-key="payments">To'lovlar</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reviews.html"><i class="bi bi-star-fill"></i><span data-lang-key="my_reviews">Izohlarim</span></a>
        </li>
      </ul>
  </aside><!-- End Sidebar-->

  <div class="sidebar-backdrop" id="sidebarBackdrop"></div>

  <main class="main-content">
    <!-- Main Header -->
    <header class="main-header">
        <div class="header-left d-flex align-items-center">
            <button class="btn px-1 me-2" id="sidebarToggleBtn" type="button"><i class="bi bi-list fs-3"></i></button>
            <div class="pagetitle d-none d-md-block">
                <h1 data-lang-key="payments_title">To'lovlar Sahifasi</h1>
            </div>
        </div>
        <div class="header-right d-flex align-items-center">
             <!-- Language Dropdown -->
            <div class="dropdown lang-dropdown me-2">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="bi bi-translate fs-5"></i>
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item d-flex align-items-center" href="#" data-lang="uz"><i class="bi bi-flag-fill me-2"></i> O'zbekcha</a></li>
                <li><a class="dropdown-item d-flex align-items-center" href="#" data-lang="ru"><i class="bi bi-flag-fill me-2"></i> Русский</a></li>
                <li><a class="dropdown-item d-flex align-items-center" href="#" data-lang="en"><i class="bi bi-flag-fill me-2"></i> English</a></li>
              </ul>
            </div>

            <button class="btn nav-link me-2" id="darkModeToggle"><i class="bi bi-moon-stars-fill fs-5"></i></button>
            <a href="#" class="nav-link me-3"><i class="bi bi-bell fs-5"></i></a>
            <!-- Profile Dropdown -->
            <div class="dropdown profile-dropdown">
                <a href="#" class="d-flex align-items-center text-decoration-none" data-bs-toggle="dropdown">
                    <img src="https://placehold.co/40x40/EFEFEF/333333?text=A" alt="Profile" class="rounded-circle" id="profileImage">
                    <div class="ms-2 d-none d-md-block">
                        <div class="fw-bold" id="profileName">Ali Valiyev</div>
                        <small class="text-muted" data-lang-key="patient">Bemor</small>
                    </div>
                </a>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item d-flex align-items-center" href="#" data-lang-key="settings"><i class="bi bi-gear-fill me-2 text-secondary"></i>Sozlamalar</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item d-flex align-items-center text-danger" href="#" data-lang-key="logout"><i class="bi bi-box-arrow-right me-2"></i>Chiqish</a></li>
                </ul>
            </div>
        </div>
    </header>

    <div class="page-body">
        <div class="pagetitle mb-4">
            <h1 data-lang-key="payments_title">To'lov Sahifasi</h1>
            <p class="text-muted mb-0" data-lang-key="payments_subtitle">Xizmatlar uchun to'lovni xavfsiz amalga oshiring.</p>
        </div>

        <div class="row">
            <!-- Payment Form -->
            <div class="col-lg-7">
                <div class="info-card">
                    <div class="card-header">
                        <h5><i class="bi bi-wallet2 me-2"></i><span data-lang-key="payment_details_title">To'lov ma'lumotlari</span></h5>
                    </div>
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-4 p-3 bg-light rounded-3">
                            <div>
                                <p class="mb-1 text-muted" data-lang-key="service_name">Xizmat nomi</p>
                                <h6 class="mb-0">Onlayn Konsultatsiya (Dr. S. Nosirova)</h6>
                            </div>
                            <div>
                                <p class="mb-1 text-muted" data-lang-key="amount">Summa</p>
                                <h6 class="mb-0">250,000 UZS</h6>
                            </div>
                        </div>
                        
                        <h6 data-lang-key="select_payment_system">To'lov tizimini tanlang:</h6>
                        <div class="d-flex gap-2 mb-4 payment-methods">
                            <button class="btn active"><img src="https://cdn.paycom.uz/documentation_assets/payme_01.svg" alt="Payme"></button>
                            <button class="btn"><img src="https://cdn.click.uz/app/img/logo-new.svg" alt="Click"></button>
                            <button class="btn"><img src="https://www.visa.com.sg/dam/VCOM/regional/ap/logos/visa-logo-small.png" alt="Visa"></button>
                        </div>

                        <form>
                            <div class="mb-3">
                                <label for="cardName" class="form-label" data-lang-key="cardholder_name">Karta egasining ismi</label>
                                <input type="text" class="form-control" id="cardName" placeholder="ALI VALIYEV">
                            </div>
                            <div class="mb-3">
                                <label for="cardNumber" class="form-label" data-lang-key="card_number">Karta raqami</label>
                                <input type="text" class="form-control" id="cardNumber" placeholder="8600 0000 0000 0000">
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="cardExpiry" class="form-label" data-lang-key="expiry_date">Amal qilish muddati</label>
                                    <input type="text" class="form-control" id="cardExpiry" placeholder="OY / YIL">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="cardCVC" class="form-label">CVC</label>
                                    <input type="text" class="form-control" id="cardCVC" placeholder="123">
                                </div>
                            </div>
                            <div class="d-grid">
                                <button type="button" class="btn btn-primary btn-lg" data-lang-key="pay_button">250,000 UZS To'lash</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Card Visual -->
            <div class="col-lg-5">
                <div class="credit-card">
                    <div class="d-flex justify-content-between align-items-center">
                        <img src="https://www.gstatic.com/images/icons/material/system/2x/sim_card_white_24dp.png" alt="Chip" style="height: 40px;">
                        <i class="bi bi-wifi fs-2"></i>
                    </div>
                    <div>
                        <p class="mb-2 credit-card-number" id="visualCardNumber">**** **** **** ****</p>
                    </div>
                    <div class="d-flex justify-content-between align-items-end">
                        <div>
                            <p class="small mb-0 text-white-50" data-lang-key="cardholder_name_visual">Karta egasi</p>
                            <p class="mb-0 credit-card-name" id="visualCardName">ISM FAMILIYA</p>
                        </div>
                        <div>
                            <p class="small mb-0 text-white-50" data-lang-key="expiry_date_visual">Amal qilish muddati</p>
                            <p class="mb-0 credit-card-expiry" id="visualCardExpiry">**/**</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Payment History -->
         <div class="info-card">
            <div class="card-header">
                <h5><i class="bi bi-clock-history me-2"></i><span data-lang-key="payment_history">To'lovlar tarixi</span></h5>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover mb-0">
                        <thead>
                            <tr>
                                <th data-lang-key="history_id">ID</th>
                                <th data-lang-key="history_service">Xizmat</th>
                                <th data-lang-key="history_date">Sana</th>
                                <th data-lang-key="history_amount">Miqdor</th>
                                <th class="text-center" data-lang-key="history_status">Holati</th>
                                <th class="text-end"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>#12542</td>
                                <td><strong>Transfer Xizmati</strong></td>
                                <td>25.07.2025</td>
                                <td>150,000 UZS</td>
                                <td class="text-center"><span class="badge bg-success-light text-success" data-lang-key="status_successful">Muvaffaqiyatli</span></td>
                                <td class="text-end"><button class="btn btn-light btn-sm"><i class="bi bi-download"></i> <span data-lang-key="receipt">Chek</span></button></td>
                            </tr>
                            <tr>
                                <td>#12511</td>
                                <td><strong>Onlayn Konsultatsiya</strong></td>
                                <td>22.07.2025</td>
                                <td>250,000 UZS</td>
                                <td class="text-center"><span class="badge bg-success-light text-success" data-lang-key="status_successful">Muvaffaqiyatli</span></td>
                                <td class="text-end"><button class="btn btn-light btn-sm"><i class="bi bi-download"></i> <span data-lang-key="receipt">Chek</span></button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</main>
</div>

  <!-- Vendor JS Files -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
      document.addEventListener('DOMContentLoaded', () => {
          // --- Translations ---
          const translations = {
              'uz': {
                  dashboard: "Boshqaruv paneli", my_profile: "Mening profilim", my_appointments: "Mening yozuvlarim", lab_results: "Tahlil natijalari", consultations: "Konsultatsiyalar", payments: "To'lovlar",
                  payments_title: "To'lovlar Sahifasi", patient: "Bemor", settings: "Sozlamalar", logout: "Chiqish",
                  payments_subtitle: "Xizmatlar uchun to'lovni xavfsiz amalga oshiring.",
                  payment_details_title: "To'lov ma'lumotlari", service_name: "Xizmat nomi", amount: "Summa",
                  select_payment_system: "To'lov tizimini tanlang:", cardholder_name: "Karta egasining ismi", card_number: "Karta raqami",
                  expiry_date: "Amal qilish muddati", pay_button: "250,000 UZS To'lash",
                  cardholder_name_visual: "Karta egasi", expiry_date_visual: "Amal qilish muddati",
                  payment_history: "To'lovlar tarixi", history_id: "ID", history_service: "Xizmat", history_date: "Sana",
                  history_amount: "Miqdor", history_status: "Holati", status_successful: "Muvaffaqiyatli", receipt: "Chek"
              },
              'ru': {
                  dashboard: "Панель управления", my_profile: "Мой профиль", my_appointments: "Мои записи", lab_results: "Результаты анализов", consultations: "Консультации", payments: "Платежи",
                  payments_title: "Страница Оплаты", patient: "Пациент", settings: "Настройки", logout: "Выйти",
                  payments_subtitle: "Совершайте безопасные платежи за услуги.",
                  payment_details_title: "Платежные данные", service_name: "Название услуги", amount: "Сумма",
                  select_payment_system: "Выберите платежную систему:", cardholder_name: "Имя владельца карты", card_number: "Номер карты",
                  expiry_date: "Срок действия", pay_button: "Оплатить 250,000 UZS",
                  cardholder_name_visual: "Владелец карты", expiry_date_visual: "Срок действия",
                  payment_history: "История платежей", history_id: "ID", history_service: "Услуга", history_date: "Дата",
                  history_amount: "Сумма", history_status: "Статус", status_successful: "Успешно", receipt: "Чек"
              },
              'en': {
                  dashboard: "Dashboard", my_profile: "My Profile", my_appointments: "My Appointments", lab_results: "Lab Results", consultations: "Consultations", payments: "Payments",
                  payments_title: "Payments Page", patient: "Patient", settings: "Settings", logout: "Logout",
                  payments_subtitle: "Make secure payments for services.",
                  payment_details_title: "Payment Details", service_name: "Service Name", amount: "Amount",
                  select_payment_system: "Select payment system:", cardholder_name: "Cardholder Name", card_number: "Card Number",
                  expiry_date: "Expiry Date", pay_button: "Pay 250,000 UZS",
                  cardholder_name_visual: "Cardholder Name", expiry_date_visual: "Expiry Date",
                  payment_history: "Payment History", history_id: "ID", history_service: "Service", history_date: "Date",
                  history_amount: "Amount", history_status: "Status", status_successful: "Successful", receipt: "Receipt"
              }
          };

          const setLanguage = (lang) => {
              document.documentElement.lang = lang;
              localStorage.setItem('language', lang);
              document.querySelectorAll('[data-lang-key]').forEach(element => {
                  const key = element.getAttribute('data-lang-key');
                  const icon = element.querySelector('i');
                  if (translations[lang] && translations[lang][key]) {
                      const translationText = translations[lang][key];
                      if (icon) {
                          element.innerHTML = icon.outerHTML + " " + translationText;
                      } else {
                          element.innerHTML = translationText;
                      }
                  }
              });
          };

          // --- UI Elements ---
          const sidebarToggleBtn = document.getElementById('sidebarToggleBtn');
          const sidebarBackdrop = document.getElementById('sidebarBackdrop');
          const darkModeToggle = document.getElementById('darkModeToggle');
          const langLinks = document.querySelectorAll('.lang-dropdown .dropdown-item');
          const cardNameInput = document.getElementById('cardName');
          const cardNumberInput = document.getElementById('cardNumber');
          const cardExpiryInput = document.getElementById('cardExpiry');

          // --- Sidebar Logic ---
          const toggleSidebar = () => {
              const isDesktop = window.innerWidth >= 992;
              if (isDesktop) {
                  document.body.classList.toggle('sidebar-collapsed');
              } else {
                  document.body.classList.toggle('sidebar-open');
              }
          };

          if (sidebarToggleBtn) {
              sidebarToggleBtn.addEventListener('click', toggleSidebar);
          }
          if (sidebarBackdrop) {
              sidebarBackdrop.addEventListener('click', toggleSidebar);
          }
          
          // --- Dark Mode & Language Logic ---
          if (darkModeToggle) {
              darkModeToggle.addEventListener('click', () => {
                  document.body.classList.toggle('dark-mode');
                  const icon = darkModeToggle.querySelector('i');
                  icon.classList.toggle('bi-moon-stars-fill');
                  icon.classList.toggle('bi-sun-fill');
              });
          }
          langLinks.forEach(link => {
              link.addEventListener('click', (e) => {
                  e.preventDefault();
                  const selectedLang = e.currentTarget.getAttribute('data-lang');
                  setLanguage(selectedLang);
              });
          });
          
          // --- Payment Card Visual Logic ---
          function formatCardNumber(value) {
              const regex = /^(\d{0,4})(\d{0,4})(\d{0,4})(\d{0,4})$/g;
              const onlyNumbers = value.replace(/[^\d]/g, '');
              return onlyNumbers.replace(regex, (regex, $1, $2, $3, $4) =>
                  [$1, $2, $3, $4].filter(group => !!group).join(' ')
              );
          }

          cardNumberInput.addEventListener('keyup', () => {
              const formattedValue = formatCardNumber(cardNumberInput.value);
              cardNumberInput.value = formattedValue;
              document.getElementById('visualCardNumber').textContent = formattedValue || '**** **** **** ****';
          });

          cardNameInput.addEventListener('keyup', () => {
              document.getElementById('visualCardName').textContent = cardNameInput.value.toUpperCase() || 'ISM FAMILIYA';
          });

          cardExpiryInput.addEventListener('keyup', () => {
              const formattedValue = cardExpiryInput.value.replace(/[^\d]/g, '').replace(/(.{2})/, '$1/').slice(0, 5);
              cardExpiryInput.value = formattedValue;
              document.getElementById('visualCardExpiry').textContent = formattedValue || '**/**';
          });
          
          // --- Initial Load ---
          const savedLang = localStorage.getItem('language') || 'uz';
          setLanguage(savedLang);
          
          document.getElementById('profileName').textContent = "Ali Valiyev";
          document.getElementById('profileImage').src = `https://placehold.co/40x40/EFEFEF/333333?text=A`;
          
          if (window.innerWidth < 992) {
              document.body.classList.add('sidebar-collapsed');
          }
      });
  </script>
</body>
</html>
